<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" 
              name="Clothing_58x40_Fixed" 
              pageWidth="164"
              pageHeight="113"
              columnWidth="164" 
              leftMargin="0" 
              rightMargin="0" 
              topMargin="0" 
              bottomMargin="0">

    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="One Empty Record"/>

    <queryString>
        <![CDATA[]]>
    </queryString>

    <!-- Поля -->
    <field name="name" class="java.lang.String"/>
    <field name="color" class="java.lang.String"/>
    <field name="size" class="java.lang.String"/>
    <field name="country" class="java.lang.String"/>
    <field name="structure" class="java.lang.String"/>
    <field name="model" class="java.lang.String"/>
    <field name="dataMatrix" class="java.lang.String"/>
    <field name="cis" class="java.lang.String"/>

    <detail>
        <!-- ВАЖНО: высота band = pageHeight -->
        <band height="113">
            <frame>
                <reportElement x="0" y="0" width="164" height="113" backcolor="#FFFFFF"/>
                <box>
                    <pen lineWidth="0.25"/>
                </box>

                <!-- Data Matrix (увеличен) -->
                <componentElement>
                    <reportElement x="6" y="6" width="50" height="50"/>
                    <jr:DataMatrix xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" 
                                   textPosition="bottom" 
                                   shape="force-square">
                        <jr:codeExpression><![CDATA[$F{dataMatrix}]]></jr:codeExpression>
                    </jr:DataMatrix>
                </componentElement>

                <!-- CIS под DataMatrix -->
                <textField>
                    <reportElement x="6" y="58" width="50" height="10"/>
                    <textElement textAlignment="Center">
                        <font fontName="DejaVu Sans" size="5"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{cis}]]></textFieldExpression>
                </textField>

                <!-- НАЗВАНИЕ: первые два слова -->
                <textField>
                    <reportElement x="62" y="6" width="96" height="14"/>
                    <textElement>
                        <font fontName="DejaVu Sans" size="8" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[
                        $F{name} == null ? "" :
                        ( $F{name}.split(" ").length >= 2 
                        ? $F{name}.split(" ")[0] + " " + $F{name}.split(" ")[1]
                        : $F{name}.split(" ")[0] )
                    ]]></textFieldExpression>
                </textField>

                <!-- ЦВЕТ -->
                <textField>
                    <reportElement x="62" y="22" width="96" height="10"/>
                    <textElement>
                        <font fontName="DejaVu Sans" size="7"/>
                    </textElement>
                    <textFieldExpression><![CDATA[
                        $F{color} != null ? "цв." + $F{color} : ""
                    ]]></textFieldExpression>
                </textField>

                <!-- РАЗМЕР -->
                <textField>
                    <reportElement x="62" y="34" width="96" height="12"/>
                    <textElement textAlignment="Center">
                        <font fontName="DejaVu Sans" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[
                        $F{size} != null ? $F{size} : ""
                    ]]></textFieldExpression>
                </textField>

                <!-- СТРАНА -->
                <textField>
                    <reportElement x="62" y="48" width="96" height="10"/>
                    <textElement>
                        <font fontName="DejaVu Sans" size="7"/>
                    </textElement>
                    <textFieldExpression><![CDATA[
                        $F{country} != null ? $F{country} : ""
                    ]]></textFieldExpression>
                </textField>

                <!-- СОСТАВ -->
                <textField>
                    <reportElement x="62" y="60" width="96" height="14"/>
                    <textElement>
                        <font fontName="DejaVu Sans" size="7"/>
                    </textElement>
                    <textFieldExpression><![CDATA[
                        $F{structure} != null ? $F{structure} : ""
                    ]]></textFieldExpression>
                </textField>

                <!-- АРТИКУЛ -->
                <textField>
                    <reportElement x="62" y="76" width="96" height="10"/>
                    <textElement>
                        <font fontName="DejaVu Sans" size="7"/>
                    </textElement>
                    <textFieldExpression><![CDATA[
                        $F{model} != null ? "арт." + $F{model} : ""
                    ]]></textFieldExpression>
                </textField>

            </frame>
        </band>
    </detail>
</jasperReport>